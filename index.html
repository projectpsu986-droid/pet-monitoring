<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Pet Monitoring System</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>

<body>
  <!-- Navigation Bar -->
  <nav class="navbar">
    <div class="hamburger-menu">
      <button class="hamburger-btn" onclick="toggleMenu()">‚ò∞</button>
    </div>
    <h1 class="navbar-title">Pet Monitoring System</h1>
  </nav>

  <!-- Slide Menu -->
  <div id="menuOverlay" class="menu-overlay" onclick="closeMenu()"></div>
  <div id="navMenu" class="nav-dropdown hidden">
    <button class="nav-item" onclick="showHomePage(); closeMenu()">üè† Home</button>
    <button class="nav-item" onclick="showCatPage(); closeMenu()">üê± Cat</button>
    <button class="nav-item" onclick="showNotificationsPage(); closeMenu()">üîî Notifications</button>
    <!-- Admin-only menu (hidden for normal users) -->
    <button id="adminPanelBtn" class="nav-item hidden" onclick="goAdminPanel(); closeMenu()">üõ†Ô∏è Admin Panel</button>
    <button class="nav-item" onclick="showProfilePage(); closeMenu()">üë§ Profile</button>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Home -->
  <div id="homePage" class="page">
    <div class="room-grid">
      <div class="room-card" onclick="selectRoom(0)">
        <div class="room-preview">
          <div class="live-preview">
            <div class="camera-placeholder">üìπ</div>
          </div>
        </div>
        <h3>Hall</h3>
        <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
      </div>

      <div class="room-card" onclick="selectRoom(1)">
        <div class="room-preview">
          <div class="live-preview">
            <div class="camera-placeholder">üìπ</div>
          </div>
        </div>
        <h3>Kitchen</h3>
        <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
      </div>

      <div class="room-card" onclick="selectRoom(2)">
        <div class="room-preview">
          <div class="live-preview">
            <div class="camera-placeholder">üìπ</div>
          </div>
        </div>
        <h3>Garage</h3>
        <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
      </div>

      <div class="room-card" onclick="selectRoom(3)">
        <div class="room-preview">
          <div class="live-preview">
            <div class="camera-placeholder">üìπ</div>
          </div>
        </div>
        <h3>Garden</h3>
        <button class="select-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á</button>
      </div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß -->
  <div id="cameraPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="goBack()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2 id="currentRoomName">Hall</h2>
    </div>
    <div class="camera-container">
      <div class="video-wrapper">
        <!-- Fullscreen button (YouTube-like) -->
        <button id="fullscreenBtn" class="fullscreen-btn" type="button" onclick="toggleCameraFullscreen()" aria-label="Fullscreen">‚õ∂</button>
        <div id="cameraFeed" class="camera-feed">
          <div class="simulated-video">
            <div class="camera-placeholder large">üìπ</div>
            <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</p>
            <p id="timestamp"></p>
          </div>
        </div>
      </div>

      <div class="camera-controls">
        <button class="nav-btn" onclick="previousCamera()">‚Üê ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
        <span id="cameraInfo">‡∏Å‡∏•‡πâ‡∏≠‡∏á 1 ‡∏à‡∏≤‡∏Å 4</span>
        <button class="nav-btn" onclick="nextCamera()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Cat Gallery -->
  <div id="catPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="showHomePage()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Cat</h2>
      <button class="settings-btn" onclick="openCatSettings()" title="‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡∏ß</button>
    </div>

    <!-- Cat Visibility Settings Modal -->
    <div id="catSettingsOverlay" class="modal-overlay hidden" onclick="closeCatSettings()"></div>
    <div id="catSettingsModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="catSettingsTitle">
      <div class="modal-header">
        <h3 id="catSettingsTitle">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á</h3>
        <button class="modal-close" onclick="closeCatSettings()" aria-label="Close">‚úï</button>
      </div>

      <div class="modal-body">
        <div class="modal-actions-row">
          <button class="small-btn" onclick="toggleAllCatSettings(true)">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
          <button class="small-btn gray" onclick="toggleAllCatSettings(false)">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </div>

        <div id="catSettingsList" class="cat-settings-list">
          <div class="cat-settings-empty">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>
        <div class="cat-settings-hint">* ‡πÅ‡∏°‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Cat ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</div>
      </div>

      <div class="modal-footer">
        <button class="config-btn cancel-btn" onclick="closeCatSettings()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button class="config-btn save-btn" onclick="saveCatSettings()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
      </div>
    </div>

    <div class="cat-gallery">
      <div class="cat-grid">
        <div class="cat-card" onclick="selectCat(0)">
          <img src="https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=300&h=300&fit=crop" alt="Orange Cat"
            class="cat-image">
          <h3>Orange</h3>
        </div>
        <div class="cat-card" onclick="selectCat(1)">
          <img src="https://images.unsplash.com/photo-1573865526739-10659fec78a5?w=300&h=300&fit=crop" alt="Gray Cat"
            class="cat-image">
          <h3>Gray</h3>
        </div>
        <div class="cat-card" onclick="selectCat(2)">
          <img src="https://images.unsplash.com/photo-1533738363-b7f9aef128ce?w=300&h=300&fit=crop" alt="White Cat"
            class="cat-image">
          <h3>White</h3>
        </div>
        <div class="cat-card" onclick="selectCat(3)">
          <img src="https://images.unsplash.com/photo-1596854407944-bf87f6fdd49e?w=300&h=300&fit=crop" alt="Black Cat"
            class="cat-image">
          <h3>Black</h3>
        </div>
        <div class="cat-card" onclick="selectCat(4)">
          <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?w=300&h=300&fit=crop"
            alt="Striped Cat" class="cat-image">
          <h3>Striped</h3>
        </div>
        <div class="cat-card" onclick="selectCat(5)">
          <img src="https://images.unsplash.com/photo-1592194996308-7b43878e84a6?w=300&h=300&fit=crop"
            alt="Calico Cat" class="cat-image">
          <h3>Calico</h3>
        </div>
      </div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Cat Detail -->
  <div id="catDetailPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="goBackToCatGallery()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2 id="catDetailName">Cat Name</h2>
      <button class="settings-btn" onclick="openCatEditModal()" title="‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
    </div>
    <div class="cat-detail-container">
      <div class="cat-profile">
        <img id="catDetailImage" src="" alt="Cat Photo" class="cat-detail-image">
        <div class="cat-info">
          <h2 id="catProfileName">Name</h2>
          <p><strong>Location:</strong> <span id="catLocation">Unknown</span></p>
        </div>
      </div>

      <div class="cat-actions">
        <button class="action-btn" onclick="showCatStatisticsPage()">üìä Statistics</button>
        <button class="action-btn" onclick="showAlertsPage()">üö® Alerts</button>
        <button class="action-btn" onclick="showTimelinePage()">‚è±Ô∏è Timeline</button>
      </div>
    </div>
  </div>

	  <!-- Cat Edit Modal (edit name + upload image) -->
  <div id="catEditOverlay" class="modal-overlay hidden" onclick="closeCatEditModal()"></div>
  <div id="catEditModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="catEditTitle">
    <div class="modal-header">
      <h3 id="catEditTitle">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏°‡∏ß</h3>
      <button class="modal-close" onclick="closeCatEditModal()" aria-label="Close">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="edit-cat-preview">
        <!-- <img id="catEditPreviewImg" src="" alt="Preview" class="cat-settings-thumb" /> -->
        <div class="edit-cat-preview-text">
          <div class="edit-cat-preview-name" id="catEditPreviewName">-</div>
          <div class="edit-cat-preview-hint"></div>
        </div>
      </div>

      <div class="config-grid" style="grid-template-columns: 1fr; gap: 16px;">
	        <div class="config-item" style="margin:0;">
          <div class="config-label">
            <span class="label-icon">üè∑Ô∏è</span>
            <span class="label-text">‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß</span>
          </div>
          <div class="config-input-wrapper">
            <input id="catEditNameInput" class="config-input" type="text" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡πÉ‡∏´‡∏°‡πà">
          </div>
        </div>

	        <div class="config-item" style="margin:0;">
          <div class="config-label">
            <span class="label-icon">üñºÔ∏è</span>
	            <span class="label-text">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ô‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</span>
          </div>
          <div class="config-input-wrapper">
	            <input id="catEditFileInput" class="config-input" type="file" accept="image/*" onchange="updateCatEditPreview()">
          </div>
	          <div class="cat-settings-hint" style="margin-top:8px;">
	           
	          </div>
          <div class="edit-cat-actions">
            <button class="small-btn gray" type="button" onclick="resetCatRealImage()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ó‡∏£‡∏π‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="config-btn cancel-btn" onclick="closeCatEditModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button class="config-btn save-btn" onclick="saveCatEdit()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Statistics -->
  <div id="statisticsPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="goBackFromStatistics()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2 id="statisticsTitle">Statistics</h2>
    </div>
    <div class="statistics-container">
      <div class="stats-header">
        <div class="cat-selector">
          <select id="catSelect" class="cat-dropdown" onchange="updateStatistics()">
            <option value="0">Orange</option>
            <option value="1">Gray</option>
            <option value="2">White</option>
            <option value="3">Black</option>
            <option value="4">Striped</option>
            <option value="5">Calico</option>
          </select>
        </div>

        <!-- Date Filters: ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö daily / monthly / yearly / range -->
        <div class="date-filters">
          <select id="periodSelect" class="period-dropdown" onchange="updateDateFilter()">
            <option value="daily">‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</option>
            <option value="monthly">‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</option>
            <option value="yearly">‡∏£‡∏≤‡∏¢‡∏õ‡∏µ</option>
            <option value="range">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏≠‡∏á</option>
          </select>

          <select id="yearStartSelect" class="year-dropdown hidden"></select>

          <select id="yearSelect" class="year-dropdown">
            <option value="2024">2024</option>
            <option value="2023">2023</option>
            <option value="2022">2022</option>
          </select>

          <select id="monthSelect" class="month-dropdown">
            <option value="01">‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°</option>
            <option value="02">‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
            <option value="03">‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°</option>
            <option value="04">‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô</option>
            <option value="05">‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°</option>
            <option value="06">‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô</option>
            <option value="07">‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°</option>
            <option value="08">‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°</option>
            <option value="09">‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô</option>
            <option value="10">‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°</option>
            <option value="11">‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô</option>
            <option value="12">‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°</option>
          </select>

          <div id="dateRangeWrapper" class="date-range-wrapper hidden">
            <input type="text" id="dateRange" class="date-input" placeholder="dd/mm/yyyy - dd/mm/yyyy" inputmode="numeric" autocomplete="off">
            <button type="button" class="calendar-btn" onclick="openDateRangePicker()" aria-label="Open calendar">üìÖ</button>
          </div>

          <button class="search-btn" onclick="searchStatistics()">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
        </div>
      </div>

      <div class="stats-content"></div>

      <div class="stats-chart-container">
        <canvas id="statsChart" class="stats-chart"></canvas>
      </div>

      <!-- ‚úÖ ‡∏ï‡∏±‡∏î Sleep ‡∏≠‡∏≠‡∏Å ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ Eat + Excrete -->
      <div class="stats-summary">
        <div class="summary-cards">
          <div class="summary-card">
            <div class="card-icon">üçΩÔ∏è</div>
            <div class="card-content">
              <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏ô</h3>
              <p id="eatTime">0 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
            </div>
          </div>
          <div class="summary-card">
            <div class="card-icon">üöΩ</div>
            <div class="card-content">
              <h3>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢</h3>
              <p id="excreteTime">0 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>


  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Timeline (10s slots) -->
  <div id="timelinePage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="goBackFromTimeline()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2 id="timelineTitle">Timeline</h2>
    </div>

    <div class="timeline-container">
      <div class="timeline-toolbar">
        <label class="timeline-label">
          ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:
          <input type="date" id="timelineDate" class="date-input">
        </label>

        <label class="timeline-label">
          ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ö‡∏ö:
          <select id="timelineGranularity" class="filter-select">
            <option value="10s">10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</option>
            <option value="1h">1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</option>
          </select>
        </label>

        <button class="search-btn" onclick="reloadTimeline()">‡πÇ‡∏´‡∏•‡∏î</button>

        <label class="timeline-label timeline-toggle">
          <input type="checkbox" id="timelineAutoRefresh" checked>
          Auto refresh
        </label>
      </div>

      <div id="timelineMeta" class="timeline-meta">-</div>

      <!-- 10s view (vertical scroll) -->
      <div id="timelineList" class="timeline-list"></div>

      <!-- 1h view (table grid) -->
      <div id="timelineTableWrap" class="timeline-table-wrap hidden">
        <div class="timeline-table-hint">
          <span>‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (00-23)</span>
          <span class="hint-muted">* ‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‚Äì‡∏Ç‡∏ß‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ó‡∏∏‡∏Å‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>
        </div>
        <div class="timeline-table-scroll">
          <table id="timelineTable" class="timeline-table"></table>
        </div>
      </div>

      <div id="timelineLoading" class="timeline-loading hidden">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
      <div id="timelineEnd" class="timeline-end hidden">‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß</div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Alerts -->
  <div id="alertsPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="goBackFromAlerts()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Alerts Page</h2>
    </div>

    <div class="alerts-sortbar">
      <label for="alertsSortOrder">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö:</label>
      <select id="alertsSortOrder" aria-label="‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö Alerts">
        <option value="newest" selected>‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î</option>
        <option value="oldest">‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î</option>
      </select>
    </div>

    <div class="alerts-container">
      <div id="alertsList" class="alerts-list"></div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Notifications -->
  <div id="notificationsPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="showHomePage()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Notifications</h2>
    </div>

    <div class="notifications-container">
      <div id="notificationsList" class="notifications-list"></div>
    </div>
  </div>



  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Notification Settings (‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô) -->
  <div id="notificationSettingsPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="showProfilePage()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Notification Settings</h2>
    </div>

    
<!-- Web Push Settings / Test -->
<div class="notifications-push-card">
  <div class="push-title">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
  <div class="push-desc">
    ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤/‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
  </div>

  <div class="push-row">
    <span id="pushStatusSettings" class="push-status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</span>
  </div>

  <div class="push-row">
    <button class="config-btn save-btn" onclick="enablePushNotifications()">‡πÄ‡∏õ‡∏¥‡∏î/‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï Push</button>
    <button class="config-btn cancel-btn" onclick="disablePushNotifications()">‡∏õ‡∏¥‡∏î Push</button>
  </div>

  <div class="push-subtitle">üìå ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</div>
  <div id="pushTemplateList" class="push-template-list"></div>

  <div class="push-form">
    <div class="push-field">
      <label for="pushTitleInput">Title</label>
      <input id="pushTitleInput" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô Pet Monitoring" />
    </div>
    <div class="push-field">
      <label for="pushBodyInput">Message</label>
      <textarea id="pushBodyInput" rows="3" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô..."></textarea>
    </div>
    <div class="push-field">
      <label for="pushUrlInput">URL ‡∏ï‡∏≠‡∏ô‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
      <input id="pushUrlInput" type="text" placeholder="https://your-domain.com/?page=notifications" />
    </div>

    <div class="push-preview" id="pushPreviewBox"></div>

    <div class="push-row">
      <button class="config-btn" id="pushSendBtn" type="button">‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏â‡∏±‡∏ô</button>
    </div>
  </div>

  
</div>


<!-- LINE Settings / Link -->
<div class="notifications-push-card" style="margin-top:12px;">
  <div class="push-title"> ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE</div>

  <div class="push-row">
    <span id="lineStatus" class="push-status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ LINE: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</span>
  </div>

  <div class="push-row" style="gap:8px; flex-wrap:wrap;">
    <button class="config-btn save-btn" onclick="refreshLineStatus()">‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ LINE</button>
    <button class="config-btn save-btn" onclick="generateLineLinkCode()">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</button>
  </div>

  <div class="push-row" style="align-items:flex-start;">
    <div style="flex:1;">
      <div style="font-size:13px; color:#444; margin-bottom:6px;">‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ (‡∏≠‡∏≤‡∏¢‡∏∏ 10 ‡∏ô‡∏≤‡∏ó‡∏µ)</div>
      <div id="lineLinkCodeBox" class="push-preview" style="font-weight:700; letter-spacing:2px;">‚Äî</div>
      <div style="font-size:12px; color:#666; margin-top:6px;">
        ‡∏™‡πà‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ LINE ‡∏ö‡∏≠‡∏ó ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏Å‡∏î ‚Äú‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ LINE‚Äù
      </div>
    </div>
  </div>
</div>

<div class="notifications-container">
      <div class="notifications-list" style="padding: 10px; color:#666;">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Notifications</div>
    </div>
  </div>
  <!-- ‡∏´‡∏ô‡πâ‡∏≤ Profile -->
  <div id="profilePage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="showHomePage()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Profile</h2>
    </div>

    <div class="profile-container">
      <div class="profile-header">
        <div class="profile-avatar">
          <div class="avatar-placeholder">üë§</div>
        </div>
        <h2 class="profile-name">Kamonrat</h2>
      </div>

      <div class="profile-menu">
        <button class="profile-menu-item" onclick="showMyInformation()">
          <span class="menu-icon">üë§</span>
          <span class="menu-text">My Information</span>
          <span class="menu-arrow">></span>
        </button>

        <button class="profile-menu-item" onclick="showSystemConfigPage()">
          <span class="menu-icon">‚öôÔ∏è</span>
          <span class="menu-text">System Setting</span>
          <span class="menu-arrow">></span>
        </button>

        <button class="profile-menu-item" onclick="showNotificationSettings()">
          <span class="menu-icon">üîî</span>
          <span class="menu-text">Notification Settings</span>
          <span class="menu-arrow">></span>
        </button>

        <button class="profile-menu-item danger" onclick="logout()">
          <span class="menu-icon">üö™</span>
          <span class="menu-text">Logout</span>
          <span class="menu-arrow">></span>
        </button>
      </div>
    </div>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤ System Config -->
  <div id="systemConfigPage" class="page hidden">
    <div class="camera-header">
      <button class="back-btn" onclick="showProfilePage()">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
      <h2>Pet Monitoring System</h2>
    </div>

    
<div class="system-config-container">
  <!-- Cat Selector (Global / Per-cat by color) -->
  <div class="config-section">
    <div class="section-header">
      <div class="section-icon">üêæ</div>
      <div class="section-title">
        <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏°‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
        <p>‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Global" ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö, ‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏°‡∏ß‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÅ‡∏°‡∏ß (‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏µ)</p>
      </div>
    </div>
    <div class="config-grid single-item">
      <div class="config-item">
        <div class="config-label">
          <span class="label-icon">üé®</span>
          <span class="label-text">Cat / Scope</span>
        </div>
        <div class="config-input-wrapper">
          <select id="configCatSelect" class="config-input" onchange="loadSystemConfig()">
            <option value="__global__">Global ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</option>
          </select>
        </div>
        <p class="config-description"></p>
      </div>
    </div>
  </div>

      <!-- Monthly Stable Summary (>= 3 months same) -->
      <div class="config-section" id="systemConfigSummarySection">
        <div class="section-header">
          <div class="section-icon">üß©</div>
          <div class="section-title">
            <h3>Summary ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡∏∏‡∏õ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏Å‡∏£‡∏°</h3>
            <p></p>
          </div>
        </div>

        <div id="systemConfigSummaryList" class="summary-list">
          <div class="summary-empty">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
        </div>
      </div>

      <!-- Alert Settings Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">üîî</div>
          <div class="section-title">
            <h3>Alert Settings</h3>
            <p>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</p>
          </div>
        </div>

        <div class="config-grid">
          <div class="config-item">
            <div class="config-label">
              <span class="label-icon">üê±</span>
              <span class="label-text">Alert No Cat (hours)</span>
            </div>
            <div class="config-input-wrapper">
              <input type="number" id="alertNoCat" class="config-input" value="12" min="1" max="48">
              <span class="input-unit">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>
            </div>
            <p class="config-description">‡∏à‡∏∞‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÅ‡∏°‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</p>
          </div>

          <div class="config-item">
            <div class="config-label">
              <span class="label-icon">üçΩÔ∏è</span>
              <span class="label-text">Alert No Eating (‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô)</span>
            </div>
            <div class="config-input-wrapper">
              <input type="number" id="alertNoEating" class="config-input" value="2" min="1" max="24">
              <span class="input-unit">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            </div>
            <p class="config-description">‡∏à‡∏∞‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡πÑ‡∏°‡πà‡∏Å‡∏¥‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</p>
          </div>
        </div>
      </div>

      <!-- Excretion Monitoring Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">üöΩ</div>
          <div class="section-title">
            <h3>Excretion Monitoring</h3>
            <p>‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏°‡∏ß</p>
          </div>
        </div>

        <div class="config-grid">
          <div class="config-item">
            <div class="config-label">
              <span class="label-icon">‚ö†Ô∏è</span>
              <span class="label-text">Minimum Excretion (‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô)</span>
            </div>
            <div class="config-input-wrapper">
              <input type="number" id="minExcretion" class="config-input" value="3" min="1" max="10">
              <span class="input-unit">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            </div>
            <p class="config-description">‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î</p>
          </div>

          <div class="config-item">
            <div class="config-label">
              <span class="label-icon">‚ö†Ô∏è</span>
              <span class="label-text">Maximum Excretion (‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô)</span>
            </div>
            <div class="config-input-wrapper">
              <input type="number" id="maxExcretion" class="config-input" value="5" min="1" max="20">
              <span class="input-unit">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            </div>
            <p class="config-description">‡∏à‡∏∞‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏°‡∏ß‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</p>
          </div>
        </div>
      </div>

      <!-- ‚úÖ ‡∏ï‡∏±‡∏î Sleep Monitoring Section ‡∏≠‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->

      <!-- System Limits Section -->
      <div class="config-section">
        <div class="section-header">
          <div class="section-icon">üîß</div>
          <div class="section-title">
            <h3>System Limits</h3>
            <p>‡∏Ç‡∏µ‡∏î‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</p>
          </div>
        </div>

        <div class="config-grid single-item">
          <div class="config-item">
            <div class="config-label">
              <span class="label-icon">üìä</span>
              <span class="label-text">Maximum Supported Cats</span>
            </div>
            <div class="config-input-wrapper">
              <input type="number" id="maxCats" class="config-input" value="10" min="1" max="50">
              <span class="input-unit">‡∏ï‡∏±‡∏ß</span>
            </div>
            <p class="config-description">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏°‡∏ß‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô</p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="config-actions">
        <button class="config-btn save-btn" onclick="saveSystemConfig()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
        <button class="config-btn cancel-btn" onclick="resetSystemConfig()">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="script.js"></script>
  <!-- auth.js is for login.html only (avoid redirect loops on app page) -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</body>

</html>
